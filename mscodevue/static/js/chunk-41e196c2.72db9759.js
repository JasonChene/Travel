(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41e196c2"],{9603:function(e,t,i){},bb34:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-select",{staticClass:"filter-input filter-item",attrs:{placeholder:"请选择所属单位",clearable:""},model:{value:e.listQuery.orgId,callback:function(t){e.$set(e.listQuery,"orgId",t)},expression:"listQuery.orgId"}},e._l(e.orgList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),i("el-input",{staticClass:"filter-input filter-item",attrs:{placeholder:"实验室名",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.libName,callback:function(t){e.$set(e.listQuery,"libName",t)},expression:"listQuery.libName"}}),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v(" "+e._s(e.$t("common.query"))+" ")]),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-refresh-right"},on:{click:e.handleReset}},[e._v(" "+e._s(e.$t("common.reset"))+" ")]),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleCreate}},[e._v(" "+e._s(e.$t("common.add"))+" ")]),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{loading:e.downloadLoading,type:"primary"},on:{click:e.handleDownload}},[i("svg-icon",{staticStyle:{"margin-right":"5px"},attrs:{"icon-class":"excel"}}),e._v(" "+e._s(e.$t("common.export"))+" ")],1),i("el-button",{staticClass:"filter-item",attrs:{type:"danger",plain:"",icon:"el-icon-delete"},on:{click:e.handleDelete}},[e._v(" "+e._s(e.$t("common.delete"))+" ")])],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""},on:{"sort-change":e.sortChange,"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"40"}}),i("el-table-column",{attrs:{prop:"libId",sortable:"",label:"实验室ID"}}),i("el-table-column",{attrs:{prop:"libName",label:"实验室名称"}}),i("el-table-column",{attrs:{prop:"orgName",label:"所属单位"}}),i("el-table-column",{attrs:{prop:"libPrincipal",label:"负责人",width:"80"}}),i("el-table-column",{attrs:{prop:"libContact",label:"联系电话",width:"110px"}}),i("el-table-column",{attrs:{prop:"libAbout",label:"简介",width:"500"}}),i("el-table-column",{attrs:{prop:"adminName",label:"添加人",width:"60px"}}),i("el-table-column",{attrs:{sortable:"custom",prop:"libAddtime",label:"添加时间",width:"160"}}),i("el-table-column",{attrs:{width:"120",fixed:"right",label:e.$t("common.operate"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row,l=t.$index;return[i("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(t){return e.handleUpdate(a)}}},[i("i",{staticClass:"el-icon-edit-outline"})]),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(a,l)}},slot:"reference"},[i("i",{staticClass:"el-icon-delete"})])]}}])},[e._v("--\x3e ")])],1),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.currentPage,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"currentPage",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.getList}}),i("el-dialog",{attrs:{width:"40%",title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"dataForm",staticStyle:{width:"100%"},attrs:{rules:e.rules,model:e.temp,"label-position":e.labelPosition,"label-width":"90px"}},[i("el-form-item",{attrs:{label:"实验室名称",prop:"libName"}},[i("el-input",{attrs:{placeholder:e.$t("common.enter"),minlength:"3",maxlength:"64",clearable:""},model:{value:e.temp.libName,callback:function(t){e.$set(e.temp,"libName",t)},expression:"temp.libName"}})],1),i("el-form-item",{attrs:{label:"所属单位",prop:"libOrg"}},[i("el-select",{staticClass:"filter-input filter-item",attrs:{placeholder:e.temp.orgName,clearable:""},model:{value:e.temp.libOrg,callback:function(t){e.$set(e.temp,"libOrg",t)},expression:"temp.libOrg"}},e._l(e.orgList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",{attrs:{label:"负责人",prop:"libPrincipal"}},[i("el-input",{attrs:{placeholder:e.$t("common.enter"),minlength:"3",maxlength:"64",clearable:""},model:{value:e.temp.libPrincipal,callback:function(t){e.$set(e.temp,"libPrincipal",t)},expression:"temp.libPrincipal"}})],1),i("el-form-item",{attrs:{label:"联系电话",prop:"libContact"}},[i("el-row",[i("el-form-item",{attrs:{prop:"mobile"}},[i("el-input",{staticClass:"input-with-select",attrs:{placeholder:e.$t("common.enter"),maxlength:"20",clearable:""},model:{value:e.temp.libContact,callback:function(t){e.$set(e.temp,"libContact",t)},expression:"temp.libContact"}})],1)],1)],1),i("el-form-item",{attrs:{label:"简介",prop:"libAbout"}},[i("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},model:{value:e.temp.libAbout,callback:function(t){e.$set(e.temp,"libAbout",t)},expression:"temp.libAbout"}})],1),i("el-form-item",{attrs:{label:"添加人",prop:"adminId"}},[i("el-input",{attrs:{placeholder:e.$t("common.enter"),disabled:"update"===e.dialogStatus,minlength:"3",maxlength:"64",clearable:""},model:{value:e.temp.adminId,callback:function(t){e.$set(e.temp,"adminId",t)},expression:"temp.adminId"}})],1),i("el-form-item",{attrs:{label:"添加时间",prop:"libAddtime"}},["create"===e.dialogStatus?i("el-input",{attrs:{disabled:"update"===e.dialogStatus,minlength:"3",maxlength:"64",clearable:""},model:{value:e.temp.libAddtime=e.nowTime,callback:function(t){e.$set(e.temp,"libAddtime=nowTime",t)},expression:"temp.libAddtime=nowTime"}}):i("el-input",{attrs:{disabled:"update"===e.dialogStatus,minlength:"3",maxlength:"64",clearable:""},model:{value:e.temp.libAddtime,callback:function(t){e.$set(e.temp,"libAddtime",t)},expression:"temp.libAddtime"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" "+e._s(e.$t("common.cancel"))+" ")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.createData():e.updateData()}}},[e._v(" "+e._s(e.$t("common.confirm"))+" ")])],1)],1)],1)},l=[],n=(i("a15b"),i("d81d"),i("50fc"),i("6724")),r=i("333d"),s=i("4328"),o=i.n(s),c=i("21a6"),d=i("b775");function u(e){return Object(d["a"])({url:"/api/lib/lib/findLibByCondition",method:"get",params:e})}function m(e){return Object(d["a"])({url:"/api/lib/lib/updateLib",method:"put",data:e})}function p(e){return Object(d["a"])({url:"/api/lib/lib/addLib",method:"post",data:e})}function h(){return Object(d["a"])({url:"/api/lib/lib/findAllOrg",method:"get"})}function b(e){return Object(d["a"])({url:"/api/lib/lib/deleteLibByIds",method:"post",params:{libId:e}})}function g(e){return Object(d["a"])({url:"/api/lib/lib/exportLib",method:"post",responseType:"blob",data:e})}var f={name:"SysUser",components:{Pagination:r["a"]},directives:{waves:n["a"]},filters:{statusFilter:function(e){var t={1:"success",0:"danger"};return t[e]}},data:function(){return{nowTime:1,tableKey:0,labelPosition:"right",list:[],total:0,listLoading:!0,listQuery:{currentPage:1,pageSize:5,libName:void 0,orgId:void 0,sorter:"createTime_descend"},statusOptions:[{key:"1",display_name:this.$t("common.able")},{key:"0",display_name:this.$t("common.disable")}],temp:{id:void 0,status:1,prefix:"86"},orgList:[],multipleSelection:[],dialogFormVisible:!1,dialogStatus:"",textMap:{update:this.$t("common.edit"),create:this.$t("common.add")},rules:{adminName:[{required:!0,validator:this.checkIsNull,trigger:["blur","change"]}],libAbout:[{required:!0,validator:this.checkIsNull,trigger:["blur","change"]}],libAddAdmin:[{required:!0,validator:this.checkIsNull,trigger:["blur","change"]}],libContact:[{required:!0,validator:this.checkIsNull,trigger:["blur","change"]}],LibId:[{required:!0,validator:this.checkIsNull,trigger:["blur","change"]}],libName:[{required:!0,validator:this.checkIsNull,trigger:["blur","change"]}],libPrincipal:[{required:!0,validator:this.checkIsNull,trigger:["blur","change"]}],orgName:[{required:!0,validator:this.checkIsNull,trigger:["blur","change"]}]},downloadLoading:!1}},created:function(){window.innerWidth<700&&(this.labelPosition="top"),this.getList()},methods:{open:function(){var e=this;this.$confirm("此操作将永久删除该实验室信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$message({type:"success",message:"删除成功!"})})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleClick:function(e){console.log(e)},getList:function(){var e=this;this.listLoading=!0,u(this.listQuery).then((function(t){e.list=t.data.list,e.total=t.data.pagination.total,e.listLoading=!1})),h().then((function(t){e.orgList=t.data}))},timeFormate:function(e){var t=new Date(e).getFullYear(),i=new Date(e).getMonth()+1<10?"0"+(new Date(e).getMonth()+1):new Date(e).getMonth()+1,a=new Date(e).getDate()<10?"0"+new Date(e).getDate():new Date(e).getDate(),l=new Date(e).getHours()<10?"0"+new Date(e).getHours():new Date(e).getHours(),n=new Date(e).getMinutes()<10?"0"+new Date(e).getMinutes():new Date(e).getMinutes(),r=new Date(e).getSeconds()<10?"0"+new Date(e).getSeconds():new Date(e).getSeconds();return this.nowTime=t+"-"+i+"-"+a+" "+l+":"+n+":"+r,this.nowTime},nowTimes:function(){this.timeFormate(new Date),setInterval(this.nowTimes,3e4)},handleFilter:function(){this.listQuery.currentPage=1,this.getList()},handleReset:function(){this.listQuery.username="",this.listQuery.status="",this.handleFilter()},sortChange:function(e){var t=e.prop,i=e.order;"createTime"===t&&this.sortByCreateTime(i)},sortByCreateTime:function(e){this.listQuery.sorter="ascending"===e?"createTime_ascend":"createTime_descend",this.handleFilter()},handleSelectionChange:function(e){this.multipleSelection=e},resetTemp:function(){this.temp={id:void 0,status:1,prefix:"86"}},handleCreate:function(){var e=this;this.resetTemp(),this.nowTimes(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))},createData:function(){var e=this;this.$refs["dataForm"].validate((function(t){t&&p(e.temp).then((function(t){"success"===t.message?(e.list.unshift(e.temp),e.dialogFormVisible=!1,e.$message({message:e.$t("common.add-success"),type:"success",duration:2e3}),e.handleReset()):e.handleWarning(t)}))}))},handleUpdate:function(e){var t=this;this.temp=Object.assign({},e),this.orgName=this.temp.orgIdCn,this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))},updateData:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(t){var i={};i.libName=e.temp.libName,i.adminName=e.temp.adminName,i.adminId=e.temp.adminId,i.libAbout=e.temp.libAbout,i.libAddAdmin=e.temp.libAddAdmin,i.libAddtime=e.temp.libAddtime,i.libContact=e.temp.libContact,i.libId=e.temp.libId,i.libOrg=e.temp.libOrg,i.libPrincipal=e.temp.libPrincipal,i.orgName=e.temp.orgName,m(i).then((function(t){"success"===t.message?(e.dialogFormVisible=!1,e.$message({message:e.$t("common.edit-success"),type:"success",duration:2e3}),e.handleReset()):e.handleWarning(t)}))}}))},handleDelete:function(e,t){var i=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){if(e.libId)i.delete(e.libId);else{if(0===i.multipleSelection.length)return void i.handleWarning(i.$t("common.choose-delete"));i.$confirm(i.$t("common.confirm-batch-delete"),i.$t("common.batch-delete"),{confirmButtonText:i.$t("common.confirm"),cancelButtonText:i.$t("common.cancel"),type:"warning"}).then((function(){i.delete(i.multipleSelection.map((function(e){return e.libId})).join(","))})).catch((function(){}))}})).catch((function(){i.$message({type:"info",message:"已取消删除"})}))},delete:function(e){var t=this;b(e).then((function(e){"success"===e.message?(t.$message({message:t.$t("common.delete-success"),type:"success",duration:2e3}),t.handleReset()):t.handleWarning(e)}))},handleDownload:function(){this.downloadLoading=!0;var e={};e.libName=this.listQuery.libName,e.orgId=this.listQuery.orgId,g(o.a.stringify(e)).then((function(e){Object(c["saveAs"])(e,"实验室信息表.xls")})),this.downloadLoading=!1},getSortClass:function(e){var t=this.listQuery.sorter;return t==="".concat(e,"_ascend")?"ascending":"descending"},handleWarning:function(e){this.$message({message:e.message||e,type:"warning",duration:2e3})},checkUsername:function(e,t,i){return t?t.length>2&&t.length<65?void i():i(new Error(this.$t("sysuser.username-length"))):i(new Error(this.$t("sysuser.username-required")))},checkIsNull:function(e,t,i){if(!t)return i(new Error("内容不能为空"));i()},checkPassword:function(e,t,i){return t?t.length>5&&t.length<32?void i():i(new Error(this.$t("sysuser.password-length"))):i(new Error(this.$t("sysuser.password-required")))},checkEmail:function(e,t,i){if(!t)return i(new Error(this.$t("sysuser.email-required")));var a=/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;if(!a.test(t))return i(new Error(this.$t("sysuser.email-format")));i()},checkMobile:function(e,t,i){if(!t)return i(new Error(this.$t("sysuser.mobile-required")));var a=/^1\d{10}$/;if(!a.test(t))return i(new Error(this.$t("sysuser.mobile-format")));i()},checkRoleId:function(e,t,i){if(!t)return i(new Error(this.$t("sysuser.roleId-required")));i()},checkOrgId:function(e,t,i){if(!t)return i(new Error(this.$t("sysuser.orgId-required")));i()},validateOrgId:function(){var e=this;this.$nextTick((function(){e.$refs["dataForm"].clearValidate("orgId")}))},handleNodeClickOrgId:function(e){this.orgName=e.title,this.temp.orgId=e.id,this.$refs.selectOrgId.blur(),this.validateOrgId()},handleClearOrgId:function(){this.orgName="",this.temp.orgId=""}}},v=f,w=(i("f073"),i("2877")),y=Object(w["a"])(v,a,l,!1,null,null,null);t["default"]=y.exports},f073:function(e,t,i){"use strict";var a=i("9603"),l=i.n(a);l.a}}]);