(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d213377"],{ac76:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-select",{staticClass:"filter-input filter-item",attrs:{placeholder:t.$t("选择审核状态"),clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.competetionCommentStatus,callback:function(e){t.$set(t.listQuery,"competetionCommentStatus",e)},expression:"listQuery.competetionCommentStatus"}},t._l(t.lelveOptions2,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v(" "+t._s(t.$t("common.query"))+" ")]),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{loading:t.downloadLoading,type:"primary"},on:{click:t.handleDownload}},[n("svg-icon",{staticStyle:{"margin-right":"5px"},attrs:{"icon-class":"excel"}}),t._v(" "+t._s(t.$t("导入"))+" ")],1),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{loading:t.downloadLoading,type:"primary"},on:{click:t.handleDownload}},[n("svg-icon",{staticStyle:{"margin-right":"5px"},attrs:{"icon-class":"excel"}}),t._v(" "+t._s(t.$t("common.export"))+" ")],1),n("el-button",{staticClass:"filter-item",attrs:{type:"danger",plain:"",icon:"el-icon-delete"},on:{click:t.handleDelete}},[t._v(" "+t._s(t.$t("common.delete"))+" ")])],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{"row-key":"id",data:t.list,border:"",fit:"","highlight-current-row":""},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"50"}}),n("el-table-column",{attrs:{prop:"competetionCommentId",label:"评论ID",width:"150"}}),n("el-table-column",{attrs:{prop:"competetionName",label:"竞赛名称",width:"250"}}),n("el-table-column",{attrs:{prop:"competetionCommentContent",label:"评论内容",width:"350"}}),n("el-table-column",{attrs:{prop:"competetionCommentAddman",label:"评论人",width:"80"}}),n("el-table-column",{attrs:{prop:"competetionCommentAddtime",label:"评论时间"}}),n("el-table-column",{attrs:{prop:"adminName",label:"审核人"}}),n("el-table-column",{attrs:{prop:"competetionCommentStatus",label:"评论状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[!0===e.row.competetionCommentStatus?n("el-tag",{attrs:{type:"success"}},[t._v("通过")]):!1===e.row.competetionCommentStatus?n("el-tag",{attrs:{type:"danger"}},[t._v("待审核")]):t._e()]}}])}),n("el-table-column",{attrs:{label:t.$t("common.operate"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row,i=e.$index;return[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.handleUpdate(o)}}},[n("i",{staticClass:"el-icon-edit-outline"})]),n("el-button",{attrs:{slot:"reference",type:"danger",size:"mini"},on:{click:function(e){return t.handleDelete(o,i)}},slot:"reference"},[n("i",{staticClass:"el-icon-delete"})])]}}])})],1),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.currentPage,limit:t.listQuery.pageSize},on:{"update:page":function(e){return t.$set(t.listQuery,"currentPage",e)},"update:limit":function(e){return t.$set(t.listQuery,"pageSize",e)},pagination:t.getList}}),n("el-dialog",{attrs:{title:"编辑",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("el-form",{ref:"dataForm",staticStyle:{width:"100%"},attrs:{rules:t.rules,model:t.temp,"label-position":t.labelPosition,"label-width":"90px"}},[n("el-form-item",{attrs:{label:t.$t("评论内容"),prop:"competetionCommentContent"}},[n("el-input",{attrs:{placeholder:t.请输入,minlength:"3",maxlength:"64",clearable:""},model:{value:t.temp.competetionCommentContent,callback:function(e){t.$set(t.temp,"competetionCommentContent",e)},expression:"temp.competetionCommentContent"}})],1),n("el-form-item",{attrs:{label:t.$t("评论人"),prop:"level"}},[n("el-input",{attrs:{placeholder:t.请输入,disabled:"update"===t.dialogStatus,clearable:""},model:{value:t.temp.competetionCommentAddman,callback:function(e){t.$set(t.temp,"competetionCommentAddman",e)},expression:"temp.competetionCommentAddman"}})],1),n("el-form-item",{attrs:{label:t.$t("评论时间"),prop:"level"}},["create"===t.dialogStatus?n("el-input",{attrs:{disabled:"create"===t.dialogStatus,maxlength:"64",clearable:""},model:{value:t.temp.competetionCommentAddtime=t.nowTime,callback:function(e){t.$set(t.temp,"competetionCommentAddtime=nowTime",e)},expression:"temp.competetionCommentAddtime=nowTime"}}):n("el-input",{attrs:{disabled:"update"===t.dialogStatus},model:{value:t.temp.competetionCommentAddtime,callback:function(e){t.$set(t.temp,"competetionCommentAddtime",e)},expression:"temp.competetionCommentAddtime"}})],1),n("el-form-item",{attrs:{label:t.$t("状态"),prop:"competetionCommentStatus"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.temp.competetionCommentStatus,callback:function(e){t.$set(t.temp,"competetionCommentStatus",e)},expression:"temp.competetionCommentStatus"}},t._l(t.statusList,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(" "+t._s(t.$t("common.cancel"))+" ")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.createData():t.updateData()}}},[t._v(" "+t._s(t.$t("common.confirm"))+" ")])],1)],1)],1)},i=[],a=(n("a15b"),n("d81d"),n("50fc")),l=n("6724"),s=n("333d"),m=n("4328"),c=n.n(m),r=n("21a6"),d=n("b775");function p(t){return Object(d["a"])({url:"/api/competetioncomment/competetioncomment/findCompetetionCommentByCondition",method:"get",params:t})}function u(t){return Object(d["a"])({url:"/api/competetioncomment/competetioncomment/updateCompetetionComment",method:"put",data:t})}function h(t){return Object(d["a"])({url:"/api/competetioncomment/competetioncomment/addCompetetionComment",method:"post",data:t})}function g(t){return Object(d["a"])({url:"/api/competetioncomment/competetioncomment/queryByStatus",method:"get",params:t})}function f(t){return Object(d["a"])({url:"/api/competetioncomment/competetioncomment/deleteCompetetionCommentByIds",method:"post",params:{competetionCommentId:t}})}function b(t){return Object(d["a"])({url:"/api/competetioncomment/competetioncomment/exportCompetetionComment",method:"post",responseType:"blob",data:t})}var v={name:"SysOrg",components:{Pagination:s["a"]},directives:{waves:l["a"]},data:function(){return{lelveOptions2:[{value:!0,label:"审核通过"},{value:!1,label:"待审核"}],labelPosition:"right",list:[],total:0,statusList:[{value:!0,label:"审核通过"},{value:!1,label:"待审核"}],listLoading:!0,nowTime:"",listQuery:{currentPage:1,pageSize:10,competetionCommentStatus:void 0},multipleSelection:[],orgTypeOptions:[],parentIdOptions:[],parentName:"",temp:{id:void 0},dialogFormVisible:!1,dialogStatus:"",textMap:{update:this.$t("common.edit"),create:this.$t("common.add")},rules:{competetionCommentContent:[{required:!0,validator:this.checkIsNull,trigger:["blur","change"]}],competetionCommentStatus:[{required:!0,validator:this.checkIsNull,trigger:"change"}]},downloadLoading:!1}},created:function(){window.innerWidth<700&&(this.labelPosition="top"),this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,p(this.listQuery).then((function(e){t.list=e.data.list,t.total=e.data.pagination.total,t.listLoading=!1})),Object(a["h"])().then((function(e){t.orgTypeOptions=e.data.list})),Object(a["l"])().then((function(e){t.parentIdOptions=e.data.list}))},handleFilter:function(){this.listQuery.currentPage=1,this.getQueryList()},getQueryList:function(){var t=this;this.listLoading=!0,g(this.listQuery).then((function(e){t.list=e.data.list,t.total=e.data.pagination.total,t.listLoading=!1}))},handleReset:function(){this.listQuery.orgName="",this.listQuery.orgType="",this.listQuery.orgDescription="",this.handleFilter()},handleSelectionChange:function(t){this.multipleSelection=t},resetTemp:function(){this.temp={id:void 0}},handleCreate:function(){var t=this;this.resetTemp(),this.nowTimes(),this.parentName="",this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))},createData:function(){var t=this;this.$refs["dataForm"].validate((function(e){e&&h(t.temp).then((function(e){"success"===e.message?(t.list.unshift(t.temp),t.dialogFormVisible=!1,t.$message({message:t.$t("common.add-success"),type:"success",duration:2e3}),t.handleReset()):t.handleWarning(e)}))}))},handleUpdate:function(t){var e=this;this.temp=Object.assign({},t),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick((function(){e.$refs["dataForm"].clearValidate(),"0"===e.temp.parentId?e.parentName=e.$t("common.choose"):e.parentName=e.$refs.treeParentId.getNode(e.temp.parentId).label}))},updateData:function(){var t=this,e={};e.competetionCommentId=this.temp.competetionCommentId,e.competetionCommentContent=this.temp.competetionCommentContent,e.competetionCommentAddtime=this.temp.competetionCommentAddtime,e.competetionCommentAddman=this.temp.competetionCommentAddman,e.adminName=this.temp.adminName,e.competetionCommentStatus=this.temp.competetionCommentStatus,e.competetionName=this.temp.competetionName,u(e).then((function(e){"success"===e.message?(t.dialogFormVisible=!1,t.$message({message:t.$t("common.edit-success"),type:"success",duration:2e3}),t.handleReset()):t.handleWarning(e)}))},timeFormate:function(t){var e=new Date(t).getFullYear(),n=new Date(t).getMonth()+1<10?"0"+(new Date(t).getMonth()+1):new Date(t).getMonth()+1,o=new Date(t).getDate()<10?"0"+new Date(t).getDate():new Date(t).getDate(),i=new Date(t).getHours()<10?"0"+new Date(t).getHours():new Date(t).getHours(),a=new Date(t).getMinutes()<10?"0"+new Date(t).getMinutes():new Date(t).getMinutes(),l=new Date(t).getSeconds()<10?"0"+new Date(t).getSeconds():new Date(t).getSeconds();return this.nowTime=e+"-"+n+"-"+o+" "+i+":"+a+":"+l,this.nowTime},nowTimes:function(){this.timeFormate(new Date),setInterval(this.nowTimes,3e4)},handleDelete:function(t,e){var n=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){if(t.competetionCommentId)n.delete(t.competetionCommentId);else{if(0===n.multipleSelection.length)return void n.handleWarning(n.$t("common.choose-delete"));n.$confirm(n.$t("common.confirm-batch-delete"),n.$t("common.batch-delete"),{confirmButtonText:n.$t("common.confirm"),cancelButtonText:n.$t("common.cancel"),type:"warning"}).then((function(){n.delete(n.multipleSelection.map((function(t){return t.competetionCommentId})).join(","))})).catch((function(){}))}})).catch((function(){n.$message({type:"info",message:"已取消删除"})}))},delete:function(t){var e=this;f(t).then((function(t){"success"===t.message?(e.$message({message:e.$t("common.delete-success"),type:"success",duration:2e3}),e.handleReset()):e.handleWarning(t)}))},handleDownload:function(){this.downloadLoading=!0;var t={};b(c.a.stringify(t)).then((function(t){Object(r["saveAs"])(t,"双创竞赛评论表.xls")})),this.downloadLoading=!1},handleWarning:function(t){this.$message({message:t.message||t,type:"warning",duration:2e3})},validateParentId:function(){var t=this;this.$nextTick((function(){t.$refs["dataForm"].clearValidate("parentId")}))},handleNodeClickParentId:function(t){this.parentName=t.title,this.temp.parentId=t.id,this.$refs.selectParentId.blur(),this.validateParentId()},handleClearParentId:function(){this.parentName="",this.temp.parentId=""},checkIsNull:function(t,e,n){if(!e)return n(new Error("内容不能为空"));n()},checkOrgType:function(t,e,n){if(!e)return n(new Error(this.$t("sysorg.orgType-required")));n()}}},C=v,w=n("2877"),y=Object(w["a"])(C,o,i,!1,null,null,null);e["default"]=y.exports}}]);